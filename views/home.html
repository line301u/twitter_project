% include("header", title="Home")
% include("./templates/tweet")

<main>
    % include("./templates/edit_tweet")
<section>
    <div class="post_tweet-wrapper">
        <form enctype="multipart/form-data" onsubmit="return false">
            <input class="tweet_text" name="tweet_text" type="text" placeholder="What's happening? ">
            <input type="file" id="tweet_image" name="tweet_image">
            <button onclick="postTweet()">Tweet</button>
        </form>
    </div>
    <div class="tweets_wrapper">
        % if tweets == []:
        <span class="no-tweets-message">Sorry, no tweets to show</span>
        % end 
        % for tweet in tweets:
        <div>
            <form class="tweet-{{tweet['tweet_id']}}" onsubmit="return false">
                    <input class="tweet_id" name="tweet_id" type="hidden" value="{{tweet['tweet_id']}}">
                    <div>
                    % if tweet["user_profile_picture_path"]:
                    <img class="user_profile_picture" src="../images/user_profile_pictures/{{tweet['user_profile_picture_path']}}" alt="Profile picture">
                    % end
                    <span class="user_first_name">{{tweet["user_first_name"]}}</span>
                    % if tweet["user_last_name"]:
                    <span class="user_last_name">{{tweet["user_last_name"]}}</span>
                    % end
                    <span class="tweet_created_at">{{tweet["tweet_created_at"]}}</span>
                    <span class="tweet_updated_at hidden">{{tweet["tweet_updated_at"]}}</span>
                    <span class="user_name">@{{tweet["user_name"]}}</span>
                </div>
                <p class="tweet_text">{{tweet["tweet_text"]}}</p>
                <input class="tweet_image_path" name="tweet_image_path" type="hidden" value="{{tweet['tweet_image_path']}}">
                % if tweet["tweet_image_path"] and tweet["tweet_image_path"] != "0":
                <img class="tweet_image" src="../images/tweet_images/{{tweet['tweet_image_path']}}" alt="Tweet image">
                % end
                <div class="button-wrapper">
                    <button onclick="openEditTweet()">Edit</button>
                    <button onclick="deleteTweet()">Delete tweet</button>
                </div>
            </form>
        </div>
        % end 
    </div>
</section>

<section>
    <h2>You might like</h2>
</section>

<section class="follow_recomendations">
    <h2>Who to follow</h2> 
    % for user in users:
    <form class="follow_recomendations_form" onsubmit="return false">
        <input name="user_id" type="hidden" value="{{user['user_id']}}">
        <h3>
            {{user["user_first_name"]}} 
            % if user["user_last_name"]:
            {{user["user_last_name"]}}
            % end
        </h3>
        <p>@{{user["user_name"]}}</p>
        % if user["followed_by_user"]:
        <button class="follow-button hidden" onclick="createFollow()">Follow</button>
        <button class="unfollow-button" onclick="deleteFollow()">Unfollow</button>
        % else:
        <button class="follow-button" onclick="createFollow()">Follow</button>
        <button class="unfollow-button hidden" onclick="deleteFollow()">Unfollow</button>
        % end
    </form>
    % end
</section>

</main>

% include("footer")